const SaturaConfig=(function(){"use strict";const e={endpoints:["https://api.aladhan.com/v1","https://aladhan.api.islamic.network/v1","https://aladhan.api.alislam.ru/v1"],method:20,timeout:1e4,retryAttempts:2,retryDelay:1e3,paths:{timings:"/timings",timingsByAddress:"/timingsByAddress",calendar:"/calendar",calendarByAddress:"/calendarByAddress",hijriCalendar:"/hijriCalendar",gregorianToHijri:"/gToH",hijriToGregorian:"/hToG",currentDate:"/currentDate",currentTime:"/currentTime",currentTimestamp:"/currentTimestamp"}},S={imsakOffset:-10,names:{imsak:"Imsak",fajr:"Subuh",sunrise:"Terbit",dhuhr:"Dzuhur",asr:"Ashar",sunset:"Maghrib",maghrib:"Maghrib",isha:"Isya",midnight:"Tengah Malam"},apiMapping:{Imsak:"imsak",Fajr:"fajr",Sunrise:"sunrise",Dhuhr:"dhuhr",Asr:"asr",Sunset:"sunset",Maghrib:"maghrib",Isha:"isha",Midnight:"midnight"},displayOrder:["imsak","fajr","sunrise","dhuhr","asr","maghrib","isha"],obligatory:["fajr","dhuhr","asr","maghrib","isha"],ramadhanImportant:["imsak","fajr","maghrib"]},T={names:{static:"satura-static-v1",api:"satura-api-v1",database:"satura-db-v1"},duration:{prayerTimes:1440*60*1e3,hijriDate:1440*60*1e3,location:10080*60*1e3,database:720*60*60*1e3},keys:{userLocation:"satura_user_location",prayerCache:"satura_prayer_cache",settings:"satura_settings",lastUpdate:"satura_last_update"}};return{API:e,PRAYER:S,CACHE:T,LOCATION:{default:{provinceId:"31",provinceName:"DKI Jakarta",regencyId:"3171",regencyName:"Kota Jakarta Pusat",latitude:-6.186486,longitude:106.834091},geoOptions:{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5},defaultTimezone:"Asia/Jakarta",timezones:{11:"Asia/Jakarta",12:"Asia/Jakarta",13:"Asia/Jakarta",14:"Asia/Jakarta",15:"Asia/Jakarta",16:"Asia/Jakarta",17:"Asia/Jakarta",18:"Asia/Jakarta",19:"Asia/Jakarta",21:"Asia/Jakarta",31:"Asia/Jakarta",32:"Asia/Jakarta",33:"Asia/Jakarta",34:"Asia/Jakarta",35:"Asia/Jakarta",36:"Asia/Jakarta",61:"Asia/Jakarta",62:"Asia/Jakarta",51:"Asia/Makassar",52:"Asia/Makassar",53:"Asia/Makassar",63:"Asia/Makassar",64:"Asia/Makassar",65:"Asia/Makassar",71:"Asia/Makassar",72:"Asia/Makassar",73:"Asia/Makassar",74:"Asia/Makassar",75:"Asia/Makassar",76:"Asia/Makassar",81:"Asia/Jayapura",82:"Asia/Jayapura",91:"Asia/Jayapura",92:"Asia/Jayapura",93:"Asia/Jayapura",94:"Asia/Jayapura",95:"Asia/Jayapura",96:"Asia/Jayapura"}},DATABASE:{paths:{provinces:"./database/province.json",regencies:"./database/regency.json",ramadhan:"./database/ramadhan.json"},fields:{province:{id:"id",name:"name",latitude:"latitude",longitude:"longitude"},regency:{id:"id",provinceId:"province_id",name:"name",latitude:"latitude",longitude:"longitude"}}},APP:{name:"Satu Ramadhan",shortName:"Satu Ramadhan",version:"1.0.0",description:"Jadwal Sholat & Imsak Ramadhan",debug:!1,countdownInterval:1e3,dateFormat:{display:"DD MMMM YYYY",api:"DD-MM-YYYY"},timeFormat:"HH:mm"},HIJRI:{months:["Muharram","Safar","Rabiul Awal","Rabiul Akhir","Jumadil Awal","Jumadil Akhir","Rajab","Sya'ban","Ramadhan","Syawal","Dzulqa'dah","Dzulhijjah"],days:{Sunday:"Ahad",Monday:"Senin",Tuesday:"Selasa",Wednesday:"Rabu",Thursday:"Kamis",Friday:"Jumat",Saturday:"Sabtu"},ramadhanMonth:9},AUTHOR:{name:"Alea Farrel",copyright:"Alea Farrel",website:"https://aleafarrel-id.github.io/",social:{github:{url:"https://github.com/aleafarrel-id",username:"aleafarrel-id"},instagram:{url:"https://instagram.com/alea_farrel",username:"alea_farrel"}}},getApiEndpoint:function(x=0){return this.API.endpoints[x]||this.API.endpoints[0]},getAllApiEndpoints:function(){return[...this.API.endpoints]},isDebug:function(){return this.APP.debug},log:function(...x){this.isDebug()&&console.log("[Satura]",...x)},error:function(...x){console.error("[Satura Error]",...x)},getTimezoneForProvince:function(x){return this.LOCATION.timezones[x]||this.LOCATION.defaultTimezone}}})();typeof module<"u"&&module.exports&&(module.exports=SaturaConfig);const SaturaStorage=(function(){"use strict";function e(){try{const u="__storage_test__";return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch{return!1}}function S(u,y,o=null){if(!e())return SaturaConfig.error("localStorage is not available"),!1;try{const p={value:y,timestamp:Date.now(),ttl:o};return localStorage.setItem(u,JSON.stringify(p)),!0}catch(p){if(SaturaConfig.error(`Failed to set ${u}:`,p),p.name==="QuotaExceededError"){O();try{return localStorage.setItem(u,JSON.stringify({value:y,timestamp:Date.now(),ttl:o})),!0}catch{return!1}}return!1}}function T(u,y=null){if(!e())return y;try{const o=localStorage.getItem(u);if(!o)return y;const p=JSON.parse(o);return p.ttl&&Date.now()-p.timestamp>p.ttl?(localStorage.removeItem(u),y):p.value}catch(o){return SaturaConfig.error(`Failed to get ${u}:`,o),y}}function I(u){if(e())try{localStorage.removeItem(u)}catch(y){SaturaConfig.error(`Failed to remove ${u}:`,y)}}function B(u){return T(u)!==null}function H(u){if(!e())return;const y=[];for(let o=0;o<localStorage.length;o++){const p=localStorage.key(o);p&&p.startsWith(u)&&y.push(p)}y.forEach(o=>localStorage.removeItem(o)),SaturaConfig.log(`Cleared ${y.length} items with prefix: ${u}`)}function O(){if(!e())return;const u=Date.now(),y=[];for(let o=0;o<localStorage.length;o++){const p=localStorage.key(o);if(p)try{const i=localStorage.getItem(p);if(!i)continue;const s=JSON.parse(i);s.ttl&&u-s.timestamp>s.ttl&&y.push(p)}catch{}}y.forEach(o=>localStorage.removeItem(o)),y.length>0&&SaturaConfig.log(`Cleaned ${y.length} expired items`)}function N(u){const o={...x(),...u};S(SaturaConfig.CACHE.keys.settings,o,SaturaConfig.CACHE.duration.location),SaturaConfig.log("Settings saved:",o)}function x(){return T(SaturaConfig.CACHE.keys.settings,{theme:"auto",notifications:!1,calculationMethod:SaturaConfig.API.method,language:"id"})}function $(u,y=null){const o=x();return o[u]!==void 0?o[u]:y}function U(u,y){N({[u]:y})}function j(u){S(SaturaConfig.CACHE.keys.userLocation,{regencyId:u.regency?.id||null,provinceId:u.province?.id||null,coordinates:u.coordinates,source:u.source,savedAt:Date.now()},SaturaConfig.CACHE.duration.location)}function q(){return T(SaturaConfig.CACHE.keys.userLocation,null)}function P(){I(SaturaConfig.CACHE.keys.userLocation)}function k(u,y){const o=`${SaturaConfig.CACHE.keys.prayerCache}_${u}`;S(o,y,SaturaConfig.CACHE.duration.prayerTimes)}function f(u){const y=`${SaturaConfig.CACHE.keys.prayerCache}_${u}`;return T(y,null)}function F(){H(SaturaConfig.CACHE.keys.prayerCache)}function J(u){const y=T(SaturaConfig.CACHE.keys.lastUpdate,{});y[u]=Date.now(),S(SaturaConfig.CACHE.keys.lastUpdate,y)}function R(u){return T(SaturaConfig.CACHE.keys.lastUpdate,{})[u]||null}function z(u,y){const o=R(u);return o?Date.now()-o>y:!0}function G(){if(!e())return{available:!1};let u=0,y=0;const o={};for(let p=0;p<localStorage.length;p++){const i=localStorage.key(p);if(!i)continue;const s=localStorage.getItem(i),l=(i.length+(s?.length||0))*2;u+=l,y++,i.startsWith("satura_")&&(o[i]={size:l,sizeKB:Math.round(l/1024*100)/100})}return{available:!0,totalBytes:u,totalKB:Math.round(u/1024*100)/100,itemCount:y,saturaItems:o}}function w(){H("satura_"),SaturaConfig.log("All Satura storage cleared")}function t(){if(!e())return null;const u={};for(let y=0;y<localStorage.length;y++){const o=localStorage.key(y);if(!(!o||!o.startsWith("satura_")))try{u[o]=JSON.parse(localStorage.getItem(o))}catch{u[o]=localStorage.getItem(o)}}return u}function h(u){!e()||!u||(Object.entries(u).forEach(([y,o])=>{y.startsWith("satura_")&&localStorage.setItem(y,JSON.stringify(o))}),SaturaConfig.log("Data imported successfully"))}return{isAvailable:e,set:S,get:T,remove:I,has:B,clearByPrefix:H,cleanExpired:O,saveSettings:N,getSettings:x,getSetting:$,setSetting:U,saveLocation:j,getLocation:q,clearLocation:P,savePrayerCache:k,getPrayerCache:f,clearPrayerCache:F,setLastUpdate:J,getLastUpdate:R,needsUpdate:z,getStorageInfo:G,clearAll:w,exportData:t,importData:h}})();typeof module<"u"&&module.exports&&(module.exports=SaturaStorage);const SaturaAPI=(function(){"use strict";let e=0;const S={};function T(){SaturaConfig.API.endpoints.forEach((w,t)=>{S[t]={failures:0,lastFailure:null,isHealthy:!0}})}function I(w){S[w]&&(S[w].failures++,S[w].lastFailure=Date.now(),S[w].failures>=SaturaConfig.API.retryAttempts&&(S[w].isHealthy=!1,SaturaConfig.log(`Endpoint ${w} marked as unhealthy after ${S[w].failures} failures`)))}function B(w){S[w]&&(S[w].failures=0,S[w].isHealthy=!0)}function H(){const w=SaturaConfig.API.endpoints;for(let t=0;t<w.length;t++){const h=(e+t)%w.length;if(S[h]?.isHealthy!==!1)return h}return T(),0}function O(w,t,h={}){const u=w.replace(/\/$/,""),y=t.startsWith("/")?t:"/"+t,o=u+y,p=new URL(o);return Object.entries(h).forEach(([i,s])=>{s!=null&&p.searchParams.append(i,String(s))}),p.toString()}function N(w,t={},h=SaturaConfig.API.timeout){return Promise.race([fetch(w,t),new Promise((u,y)=>setTimeout(()=>y(new Error("Request timeout")),h))])}function x(w){return new Promise(t=>setTimeout(t,w))}async function $(w,t={}){const h=SaturaConfig.API.endpoints;let u=null;const y=H(),o=Math.min(2,h.length);for(let p=0;p<o;p++){const i=(y+p)%h.length,s=h[i];SaturaConfig.log(`Trying endpoint ${i}: ${s}`);try{const l=O(s,w,t);SaturaConfig.log(`Fetching: ${l}`);const a=await N(l,{},5e3);if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const m=await a.json();if(m.code!==200||m.status!=="OK")throw new Error(`API Error: ${m.status||"Unknown error"}`);return e=i,B(i),SaturaConfig.log(`Success from endpoint ${i}`),m}catch(l){u=l,SaturaConfig.log(`Failed for endpoint ${i}: ${l.message}`),I(i)}}throw SaturaConfig.error("All API endpoints failed",u),new Error(`All API endpoints failed: ${u?.message||"Unknown error"}`)}async function U(w,t,h=null){const u=h?new Date(h):new Date,y=Number(w),o=Number(t),p={latitude:y,longitude:o,method:SaturaConfig.API.method,date:F(u)};return(await $(SaturaConfig.API.paths.timings+"/"+F(u),{latitude:y,longitude:o,method:SaturaConfig.API.method})).data}async function j(w,t,h=null){const u=h||Math.floor(Date.now()/1e3),y=Number(w),o=Number(t),p={latitude:y,longitude:o,method:SaturaConfig.API.method};return(await $(SaturaConfig.API.paths.timings+"/"+u,p)).data}async function q(w,t,h,u){const y=Number(w),o=Number(t),p={latitude:y,longitude:o,method:SaturaConfig.API.method,month:h,year:u};return(await $(SaturaConfig.API.paths.calendar+"/"+u+"/"+h,{latitude:y,longitude:o,method:SaturaConfig.API.method})).data}async function P(w,t,h,u){const y=Number(w),o=Number(t),p={latitude:y,longitude:o,method:SaturaConfig.API.method};return(await $(SaturaConfig.API.paths.hijriCalendar+"/"+u+"/"+h,p)).data}async function k(w){const t=w?new Date(w):new Date,h=F(t);return(await $(SaturaConfig.API.paths.gregorianToHijri+"/"+h,{})).data}async function f(w){return(await $(SaturaConfig.API.paths.hijriToGregorian+"/"+w,{})).data}function F(w){const t=String(w.getDate()).padStart(2,"0"),h=String(w.getMonth()+1).padStart(2,"0"),u=w.getFullYear();return`${t}-${h}-${u}`}function J(w,t=null){const[h,u]=w.split(":").map(Number),y=t?new Date(t):new Date;return y.setHours(h,u,0,0),y}function R(w){const t=J(w);t.setMinutes(t.getMinutes()+SaturaConfig.PRAYER.imsakOffset);const h=String(t.getHours()).padStart(2,"0"),u=String(t.getMinutes()).padStart(2,"0");return`${h}:${u}`}function z(){return{current:e,endpoints:SaturaConfig.API.endpoints.map((w,t)=>({url:w,index:t,...S[t]}))}}function G(){T(),e=0,SaturaConfig.log("All endpoints reset to healthy state")}return T(),{fetchWithFallback:$,getPrayerTimes:U,getPrayerTimesByTimestamp:j,getMonthlyCalendar:q,getHijriCalendar:P,gregorianToHijri:k,hijriToGregorian:f,formatDateForAPI:F,parseTimeString:J,calculateImsak:R,getEndpointStatus:z,resetEndpoints:G}})();typeof module<"u"&&module.exports&&(module.exports=SaturaAPI);const SaturaDatabase=(function(){"use strict";let e=null,S=null,T=!1,I=null;async function B(){if(e)return e;try{SaturaConfig.log("Loading provinces database...");const o=await fetch(SaturaConfig.DATABASE.paths.provinces);if(!o.ok)throw new Error(`Failed to load provinces: ${o.status}`);return e=await o.json(),SaturaConfig.log(`Loaded ${e.length} provinces`),e}catch(o){throw SaturaConfig.error("Error loading provinces:",o),o}}async function H(){if(S)return S;try{SaturaConfig.log("Loading regencies database...");const o=await fetch(SaturaConfig.DATABASE.paths.regencies);if(!o.ok)throw new Error(`Failed to load regencies: ${o.status}`);return S=await o.json(),SaturaConfig.log(`Loaded ${S.length} regencies`),S}catch(o){throw SaturaConfig.error("Error loading regencies:",o),o}}async function O(){return I||(e&&S?{provinces:e,regencies:S}:(T=!0,I=Promise.all([B(),H()]).then(([o,p])=>(T=!1,I=null,{provinces:o,regencies:p})).catch(o=>{throw T=!1,I=null,o}),I))}async function N(){return await B()}async function x(o){return(await B()).find(i=>i.id===o)||null}async function $(o){const p=await B(),i=o.toLowerCase();return p.find(s=>s.name.toLowerCase()===i)||null}async function U(){return await H()}async function j(o){return(await H()).find(i=>i.id===o)||null}async function q(o){const p=await H(),i=o.toLowerCase();return p.find(s=>s.name.toLowerCase()===i)||null}async function P(o){return(await H()).filter(i=>i.province_id===o)}async function k(o){if(!o||o.length<2)return[];const p=await B(),i=o.toLowerCase();return p.filter(s=>s.name.toLowerCase().includes(i))}async function f(o,p=null){if(!o||o.length<2)return[];const i=await H(),s=o.toLowerCase();let l=i.filter(a=>a.name.toLowerCase().includes(s));return p&&(l=l.filter(a=>a.province_id===p)),l}async function F(o){const[p,i]=await Promise.all([k(o),f(o)]);return{provinces:p,regencies:i}}function J(o,p,i,s){const a=R(i-o),m=R(s-p),d=Math.sin(a/2)*Math.sin(a/2)+Math.cos(R(o))*Math.cos(R(i))*Math.sin(m/2)*Math.sin(m/2);return 6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}function R(o){return o*(Math.PI/180)}async function z(o,p){const i=await H();let s=null,l=1/0;for(const a of i){if(!a.latitude||!a.longitude)continue;const m=J(o,p,a.latitude,a.longitude);m<l&&(l=m,s={...a,distance:Math.round(m*100)/100})}return s&&SaturaConfig.log(`Nearest regency: ${s.name} (${s.distance} km)`),s}async function G(o,p){const i=await B();let s=null,l=1/0;for(const a of i){if(!a.latitude||!a.longitude)continue;const m=J(o,p,a.latitude,a.longitude);m<l&&(l=m,s={...a,distance:Math.round(m*100)/100})}return s}async function w(o,p){const[i,s]=await Promise.all([z(o,p),B()]);let l=null;return i&&(l=s.find(a=>a.id===i.province_id)||null),{regency:i,province:l,coordinates:{latitude:o,longitude:p}}}async function t(o){const p=await j(o);if(!p)return null;const i=await x(p.province_id);return{regency:p,province:i,coordinates:{latitude:p.latitude,longitude:p.longitude}}}function h(){return{isLoading:T,provincesLoaded:e!==null,regenciesLoaded:S!==null,provincesCount:e?.length||0,regenciesCount:S?.length||0}}function u(){e=null,S=null,I=null,SaturaConfig.log("Database cache cleared")}async function y(){await O(),SaturaConfig.log("Database preloaded successfully")}return{loadAll:O,preload:y,getProvinces:N,getProvinceById:x,getProvinceByName:$,getRegencies:U,getRegencyById:j,getRegencyByName:q,getRegenciesByProvince:P,searchProvinces:k,searchRegencies:f,searchAll:F,calculateDistance:J,findNearestRegency:z,findNearestProvince:G,findNearestLocation:w,getLocationByRegencyId:t,getStatus:h,clearCache:u}})();typeof module<"u"&&module.exports&&(module.exports=SaturaDatabase);const SaturaLocation=(function(){"use strict";let e=null,S=null;function T(){return"geolocation"in navigator}function I(){return new Promise((t,h)=>{if(!T()){h(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(t,h,SaturaConfig.LOCATION.geoOptions)})}async function B(){try{const t=await I(),h={latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,timestamp:t.timestamp};return SaturaConfig.log("GPS coordinates obtained:",h),h}catch(t){throw SaturaConfig.log("GPS error:",t.message),t}}function H(t,h){return T()?navigator.geolocation.watchPosition(u=>{const y={latitude:u.coords.latitude,longitude:u.coords.longitude,accuracy:u.coords.accuracy,timestamp:u.timestamp};t(y)},h,SaturaConfig.LOCATION.geoOptions):(h(new Error("Geolocation is not supported")),null)}function O(t){t!==null&&T()&&navigator.geolocation.clearWatch(t)}async function N(){try{SaturaConfig.log("Attempting to detect location via GPS...");const t=await B(),h=await SaturaDatabase.findNearestLocation(t.latitude,t.longitude);if(h.regency)return e={...h,source:"gps",gpsCoordinates:t,timestamp:Date.now()},S="gps",SaturaConfig.log("Location detected via GPS:",e),await P(e),e;throw new Error("Could not match GPS coordinates to any location in database")}catch(t){throw SaturaConfig.log("GPS detection failed:",t.message),t}}async function x(){if(e)return e;try{return await N()}catch{SaturaConfig.log("GPS failed, trying saved location...")}const t=await k();return t?(e=t,S=t.source||"manual",SaturaConfig.log("Using saved location:",e),e):(SaturaConfig.log("Using default location"),await $())}async function $(){const t=SaturaConfig.LOCATION.default,h=await SaturaDatabase.getLocationByRegencyId(t.regencyId);return h?e={...h,source:"default",timestamp:Date.now()}:e={regency:{id:t.regencyId,name:t.regencyName,latitude:t.latitude,longitude:t.longitude,province_id:t.provinceId},province:{id:t.provinceId,name:t.provinceName,latitude:t.latitude,longitude:t.longitude},coordinates:{latitude:t.latitude,longitude:t.longitude},source:"default",timestamp:Date.now()},S="default",e}async function U(t){const h=await SaturaDatabase.getLocationByRegencyId(t);if(!h)throw new Error(`Regency not found: ${t}`);return e={...h,source:"manual",timestamp:Date.now()},S="manual",await P(e),SaturaConfig.log("Location set manually:",e),e}async function j(t){const h=await SaturaDatabase.getProvinceById(t);if(!h)throw new Error(`Province not found: ${t}`);return e={regency:null,province:h,coordinates:{latitude:h.latitude,longitude:h.longitude},source:"manual",timestamp:Date.now()},S="manual",await P(e),SaturaConfig.log("Location set by province:",e),e}async function q(t,h){return e={...await SaturaDatabase.findNearestLocation(t,h),customCoordinates:{latitude:t,longitude:h},source:"manual",timestamp:Date.now()},S="manual",await P(e),SaturaConfig.log("Location set by coordinates:",e),e}async function P(t){try{const h={regencyId:t.regency?.id||null,provinceId:t.province?.id||null,coordinates:t.coordinates,source:t.source,timestamp:t.timestamp};SaturaStorage.set(SaturaConfig.CACHE.keys.userLocation,h,SaturaConfig.CACHE.duration.location),SaturaConfig.log("Location saved to storage")}catch(h){SaturaConfig.error("Failed to save location:",h)}}async function k(){try{const t=SaturaStorage.get(SaturaConfig.CACHE.keys.userLocation);if(!t)return null;if(t.regencyId){const h=await SaturaDatabase.getLocationByRegencyId(t.regencyId);if(h)return{...h,source:t.source,timestamp:t.timestamp}}else if(t.provinceId){const h=await SaturaDatabase.getProvinceById(t.provinceId);if(h)return{regency:null,province:h,coordinates:t.coordinates,source:t.source,timestamp:t.timestamp}}return null}catch(t){return SaturaConfig.error("Failed to get saved location:",t),null}}function f(){try{SaturaStorage.remove(SaturaConfig.CACHE.keys.userLocation),e=null,S=null,SaturaConfig.log("Saved location cleared")}catch(t){SaturaConfig.error("Failed to clear saved location:",t)}}function F(){try{const t=SaturaStorage.get(SaturaConfig.CACHE.keys.userLocation);return t&&t.coordinates&&t.coordinates.latitude&&t.coordinates.longitude?{coordinates:t.coordinates,source:t.source||"cached",regency:t.regencyId?{id:t.regencyId,name:null}:null,province:t.provinceId?{id:t.provinceId,name:null}:null,timestamp:t.timestamp}:null}catch(t){return SaturaConfig.error("Failed to get saved location sync:",t),null}}function J(){return{hasLocation:e!==null,source:S,geolocationSupported:T(),location:e?{regencyName:e.regency?.name,provinceName:e.province?.name,coordinates:e.coordinates,source:e.source}:null}}function R(){return e}function z(){return e?e.coordinates||{latitude:e.regency?.latitude||e.province?.latitude,longitude:e.regency?.longitude||e.province?.longitude}:null}function G(){if(!e)return"Lokasi belum diatur";const t=e.regency?.name,h=e.province?.name;return t&&h?`${t}, ${h}`:t||h||"Lokasi tidak diketahui"}async function w(t=!1){return t?(e=null,await N()):(e=null,await x())}return{isGeolocationSupported:T,getGPSCoordinates:B,watchPosition:H,clearWatch:O,detectLocation:N,getLocation:x,setDefaultLocation:$,setLocationByRegencyId:U,setLocationByProvinceId:j,setLocationByCoordinates:q,saveLocation:P,getSavedLocation:k,getSavedLocationSync:F,clearSavedLocation:f,getStatus:J,getCurrentLocation:R,getCoordinates:z,getDisplayName:G,refreshLocation:w}})();typeof module<"u"&&module.exports&&(module.exports=SaturaLocation);const SaturaPrayer=(function(){"use strict";let e=null,S=null;async function T(i=!1){const s=new Date,l=G(s);if(!i&&e&&S===l)return SaturaConfig.log("Returning cached schedule for",l),e;if(!i){const b=I(l);if(b)return e=b,S=l,SaturaConfig.log("Using localStorage cache for",l),e}const a=await SaturaLocation.getLocation(),m=SaturaLocation.getCoordinates();if(!m)throw new Error("Location not available");SaturaConfig.log("Fetching prayer times from API...");const d=await SaturaAPI.getPrayerTimes(m.latitude,m.longitude,s);return e=N(d,a),S=l,await R(l,e),SaturaConfig.log("Prayer schedule fetched:",e),e}function I(i){try{const s=`${SaturaConfig.CACHE.keys.prayerCache}_${i}`;if(!navigator.onLine){const l=localStorage.getItem(s);if(!l)return null;const a=JSON.parse(l);return a.value!==void 0?a.value:null}return SaturaStorage.get(s)}catch{return null}}function B(){const s=G(new Date),l=I(s);return l?(e=l,S=s,SaturaConfig.log("Prayer module initialized from cache"),l):null}async function H(i){const s=new Date(i),l=G(s),a=await z(l);if(a)return a;const m=SaturaLocation.getCoordinates();if(!m)throw new Error("Location not available");const d=await SaturaAPI.getPrayerTimes(m.latitude,m.longitude,s),b=SaturaLocation.getCurrentLocation(),A=N(d,b);return await R(l,A),A}async function O(i,s){const l=SaturaLocation.getCoordinates();if(!l)throw new Error("Location not available");const a=await SaturaAPI.getMonthlyCalendar(l.latitude,l.longitude,i,s),m=SaturaLocation.getCurrentLocation();return a.map(d=>N(d,m))}function N(i,s){const l=i.timings||{},a=i.date||{},m={};if(Object.entries(SaturaConfig.PRAYER.apiMapping).forEach(([d,b])=>{if(l[d]){const A=String(l[d]).split(" ")[0];m[b]={time:A,name:SaturaConfig.PRAYER.names[b],apiKey:d}}}),m.imsak)m.imsak.source="api";else if(m.fajr){const d=SaturaAPI.calculateImsak(m.fajr.time);m.imsak={time:d,name:SaturaConfig.PRAYER.names.imsak,calculated:!0,source:"calculated"},SaturaConfig.log("Imsak calculated from Fajr (API did not provide Imsak)")}return{date:{gregorian:a.gregorian||null,hijri:a.hijri||null,readable:a.readable||w(new Date),timestamp:a.timestamp||Math.floor(Date.now()/1e3)},location:{name:s?.regency?.name||s?.province?.name||"Unknown",province:s?.province?.name||null,coordinates:SaturaLocation.getCoordinates()},timings:m,meta:i.meta||null,fetchedAt:Date.now()}}function x(i=null){const s=i||e;return!s||!s.timings?[]:SaturaConfig.PRAYER.displayOrder.filter(l=>s.timings[l]).map(l=>({key:l,...s.timings[l],isObligatory:SaturaConfig.PRAYER.obligatory.includes(l),isRamadhanImportant:SaturaConfig.PRAYER.ramadhanImportant.includes(l)}))}function $(i=null){return(i||e)?.timings?.imsak?.time||null}function U(i){return SaturaAPI.calculateImsak(i)}function j(i=null){const s=i||e;if(!s||!s.timings)return null;const l=new Date,a=l.getHours()*60+l.getMinutes(),m=SaturaConfig.PRAYER.displayOrder;for(const A of m){const Y=s.timings[A];if(!Y)continue;if(h(Y.time)>a)return{key:A,name:Y.name,time:Y.time,remaining:k(Y.time),isToday:!0}}const d=s.timings.imsak?.time||s.timings.fajr?.time;let b=null;return d&&(b=q(d)),{key:"imsak",name:SaturaConfig.PRAYER.names.imsak,time:d||null,remaining:b,isToday:!1,note:"Besok"}}function q(i){const s=new Date,l=new Date(s);l.setDate(l.getDate()+1);const a=i.split(" ")[0],[m,d]=a.split(":").map(Number);l.setHours(m,d,0,0);const b=l-s;return b<=0?null:{total:b,hours:Math.floor(b/(1e3*60*60)),minutes:Math.floor(b%(1e3*60*60)/(1e3*60)),seconds:Math.floor(b%(1e3*60)/1e3),formatted:u(b)}}function P(i=null){const s=i||e;if(!s||!s.timings)return null;const l=new Date,a=l.getHours()*60+l.getMinutes(),m=SaturaConfig.PRAYER.displayOrder;let d=null;for(const b of m){const A=s.timings[b];if(!A)continue;h(A.time)<=a&&(d={key:b,name:A.name,time:A.time,startedAgo:f(A.time)})}return d}function k(i){const s=new Date,l=t(i);l<=s&&l.setDate(l.getDate()+1);const a=l-s;return{total:a,hours:Math.floor(a/(1e3*60*60)),minutes:Math.floor(a%(1e3*60*60)/(1e3*60)),seconds:Math.floor(a%(1e3*60)/1e3),formatted:u(a)}}function f(i){const s=new Date,l=t(i);l>s&&l.setDate(l.getDate()-1);const a=s-l;return{total:a,hours:Math.floor(a/(1e3*60*60)),minutes:Math.floor(a%(1e3*60*60)/(1e3*60)),formatted:y(a)}}function F(i=null){const s=i||e;return s?.date?.hijri?s.date.hijri.month?.number===SaturaConfig.HIJRI.ramadhanMonth:!1}function J(i=null){const s=i||e;return s?.timings?{sahur:{start:null,end:s.timings.imsak?.time||null,name:"Sahur"},imsak:{time:s.timings.imsak?.time||null,name:"Imsak"},berbuka:{time:s.timings.maghrib?.time||null,name:"Berbuka Puasa"}}:null}async function R(i,s){try{const l=`${SaturaConfig.CACHE.keys.prayerCache}_${i}`;SaturaStorage.set(l,s,SaturaConfig.CACHE.duration.prayerTimes),SaturaConfig.log("Cached schedule for",i),SaturaStorage.cleanExpired()}catch(l){SaturaConfig.error("Failed to cache schedule:",l)}}async function z(i){try{const s=`${SaturaConfig.CACHE.keys.prayerCache}_${i}`,l=SaturaStorage.get(s);return l&&SaturaConfig.log("Found cached schedule for",i),l}catch(s){return SaturaConfig.error("Failed to get cached schedule:",s),null}}function G(i){const s=i.getFullYear(),l=String(i.getMonth()+1).padStart(2,"0"),a=String(i.getDate()).padStart(2,"0");return`${s}-${l}-${a}`}function w(i){return i.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}function t(i,s=null){const[l,a]=i.split(":").map(Number),m=s?new Date(s):new Date;return m.setHours(l,a,0,0),m}function h(i){const[s,l]=i.split(":").map(Number);return s*60+l}function u(i){const s=Math.floor(i/36e5),l=Math.floor(i%(1e3*60*60)/(1e3*60)),a=Math.floor(i%(1e3*60)/1e3);return s>0?`${s} jam ${l} menit`:l>0?`${l} menit ${a} detik`:`${a} detik`}function y(i){const s=Math.floor(i/36e5),l=Math.floor(i%(1e3*60*60)/(1e3*60));return s>0?`${s} jam ${l} menit yang lalu`:`${l} menit yang lalu`}function o(){return{hasSchedule:e!==null,scheduleDate:S,location:SaturaLocation.getDisplayName(),nextPrayer:j(),isRamadhan:F()}}function p(){e=null,S=null,SaturaStorage.clearByPrefix(SaturaConfig.CACHE.keys.prayerCache),SaturaConfig.log("Prayer cache cleared")}return{fetchTodaySchedule:T,fetchScheduleForDate:H,fetchMonthlySchedule:O,initFromCache:B,getOrderedTimes:x,getImsakTime:$,calculateImsak:U,getNextPrayer:j,getCurrentPrayer:P,calculateTimeRemaining:k,calculateTimeElapsed:f,isRamadhan:F,getRamadhanTimes:J,cacheSchedule:R,getCachedSchedule:z,clearCache:p,getStatus:o,parseTime:t,formatDate:G,formatDateReadable:w}})();typeof module<"u"&&module.exports&&(module.exports=SaturaPrayer);const SaturaUI=(function(){"use strict";const e={};let S=!1,T=null;function I(a){if(a==null)return"";const m=String(a),d=document.createElement("div");return d.textContent=m,d.innerHTML}function B(){S||(O(),N(),x(),H(),S=!0,SaturaConfig.log("UI module initialized"),setTimeout(()=>{document.getElementById("prayerTimesSkeleton")&&!document.getElementById("prayerTimesSkeleton").classList.contains("hidden")&&(l(),SaturaConfig.log("Safety timeout: Skeletons forced hidden"))},5e3))}function H(){const a=SaturaConfig.AUTHOR,m=new Date().getFullYear(),d=document.getElementById("footerCopyright");if(d){d.textContent="",d.appendChild(document.createTextNode(`\xA9 ${m} `));const A=document.createElement("span");A.className="footer__highlight",A.textContent=a.copyright,A.style.cursor="pointer",A.setAttribute("title","Kunjungi Portofolio"),A.addEventListener("click",()=>window.open(a.website,"_blank","noopener,noreferrer")),d.appendChild(A),d.appendChild(document.createTextNode(". All rights reserved."))}const b=document.querySelector(".footer__social");b&&a.social&&(b.innerHTML="",Object.keys(a.social).forEach(A=>{const Y=a.social[A];if(Y&&Y.url){const W=document.createElement("a");W.href=Y.url,W.target="_blank",W.rel="noopener noreferrer",W.className="footer__social-link",W.setAttribute("aria-label",A);let Z="bx bxl-globe";A==="github"&&(Z="bx bxl-github"),A==="instagram"&&(Z="bx bxl-instagram"),A==="twitter"&&(Z="bx bxl-twitter"),A==="linkedin"&&(Z="bx bxl-linkedin");const ee=document.createElement("i");ee.className=Z,W.appendChild(ee),b.appendChild(W)}}))}function O(){e.app=document.getElementById("app"),e.header=document.getElementById("header"),e.menuToggle=document.getElementById("menuToggle"),e.headerNav=document.getElementById("headerNav"),e.heroTitle=document.getElementById("heroTitle"),e.heroSubtitle=document.getElementById("heroSubtitle"),e.heroBadge=document.getElementById("heroBadge"),e.locationName=document.getElementById("locationName"),e.locationBtn=document.getElementById("locationBtn"),e.scheduleTableBody=document.getElementById("scheduleTableBody"),e.countdownCard=document.getElementById("countdownCard"),e.countdownSkeleton=document.getElementById("countdownSkeleton"),e.countdownPrayerName=document.getElementById("countdownPrayerName"),e.countdownHours=document.getElementById("countdownHours"),e.countdownMinutes=document.getElementById("countdownMinutes"),e.countdownSeconds=document.getElementById("countdownSeconds"),e.locationModal=document.getElementById("locationModal"),e.modalClose=document.querySelectorAll(".modal__close, .modal__backdrop"),e.provinceSelect=document.getElementById("provinceSelect"),e.regencyList=document.getElementById("regencyList"),e.searchLocation=document.getElementById("searchLocation"),e.loadingOverlay=document.getElementById("loadingOverlay"),e.statusIndicator=document.getElementById("statusIndicator"),e.prayerTimesSkeleton=document.getElementById("prayerTimesSkeleton"),e.prayerTimesGrid=document.getElementById("prayerTimesGrid")}function N(){e.locationBtn&&e.locationBtn.addEventListener("click",k),e.modalClose?.forEach(a=>{a.addEventListener("click",f)}),e.provinceSelect&&e.provinceSelect.addEventListener("change",J),e.searchLocation&&e.searchLocation.addEventListener("input",i(R,300)),document.addEventListener("keydown",a=>{a.key==="Escape"&&T&&f()})}function x(){if(!e.menuToggle)return;e.menuToggle.addEventListener("click",()=>{e.headerNav?.classList.toggle("is-active");const m=e.menuToggle.querySelector("i");m&&(m.classList.toggle("bx-menu"),m.classList.toggle("bx-x"))}),document.querySelectorAll(".nav__link").forEach(m=>{m.addEventListener("click",()=>{e.headerNav?.classList.remove("is-active")})})}function $(a){e.locationName&&(e.locationName.textContent=a||"Pilih Lokasi")}function U(a,m){if(!e.scheduleTableBody||!a)return;e.scheduleTableBody.innerHTML="";const d=m?.date||{},b=d.hijri?.day||"-",A=y(d.gregorian?.date),Y=p(new Date),W=document.createElement("tr");W.classList.add("is-today","animate-fade-in");const Z=a.find(D=>D.key==="imsak"),ee=a.find(D=>D.key==="fajr"),ie=a.find(D=>D.key==="sunrise"),g=a.find(D=>D.key==="maghrib"),C=D=>{if(D==null)return"";const X=document.createElement("div");return X.textContent=String(D),X.innerHTML};W.innerHTML=`
            <td class="text-accent font-bold">${C(b)}</td>
            <td>${C(A)}</td>
            <td>${C(Y)}</td>
            <td class="time-primary">${C(Z?.time||ee?.time||"-")}</td>
            <td class="time-primary">${C(ie?.time||"-")}</td>
            <td class="time-accent font-bold">${C(g?.time||"-")}</td>
        `,e.scheduleTableBody.appendChild(W)}function j(a){if(!a)return;e.prayerTimesSkeleton&&(e.prayerTimesSkeleton.classList.add("hidden"),e.prayerTimesSkeleton.style.display="none"),e.prayerTimesGrid&&(e.prayerTimesGrid.classList.remove("hidden"),e.prayerTimesGrid.style.display="");const m=a.map(d=>`
            <div id="prayer-${I(d.key)}" class="prayer-time-item ${d.isNext?"is-next":""}">
                <div class="prayer-time-item__name">${I(d.name)}</div>
                <div class="prayer-time-item__time">${I(d.time)}</div>
            </div>
        `).join("");e.prayerTimesGrid.innerHTML=m}function q(a){if(a)if(e.countdownSkeleton&&(e.countdownSkeleton.classList.add("hidden"),e.countdownSkeleton.style.display="none"),e.countdownCard&&e.countdownCard.classList.remove("hidden"),e.countdownPrayerName&&(e.countdownPrayerName.textContent=a.name||"-"),a.remaining){const{hours:m,minutes:d,seconds:b}=a.remaining;e.countdownHours&&(e.countdownHours.textContent=String(m).padStart(2,"0")),e.countdownMinutes&&(e.countdownMinutes.textContent=String(d).padStart(2,"0")),e.countdownSeconds&&(e.countdownSeconds.textContent=String(b).padStart(2,"0"))}else e.countdownHours&&(e.countdownHours.textContent="--"),e.countdownMinutes&&(e.countdownMinutes.textContent="--"),e.countdownSeconds&&(e.countdownSeconds.textContent="--")}function P(a){if(a&&e.heroBadge&&a.hijri){const m=a.hijri;m.month?.number===9?(e.heroBadge.textContent="",e.heroBadge.appendChild(document.createTextNode("Ramadhan")),e.heroBadge.appendChild(document.createElement("br")),e.heroBadge.appendChild(document.createTextNode(`${m.year} H`))):(e.heroBadge.textContent="",e.heroBadge.appendChild(document.createTextNode(m.month?.en||"")),e.heroBadge.appendChild(document.createElement("br")),e.heroBadge.appendChild(document.createTextNode(`${m.year} H`)))}}async function k(){e.locationModal&&(T=e.locationModal,e.locationModal.classList.add("is-active"),document.body.style.overflow="hidden",await F())}function f(){T&&(T.classList.remove("is-active"),document.body.style.overflow="",T=null)}async function F(){if(e.provinceSelect)try{const a=await SaturaApp.getProvinces();e.provinceSelect.innerHTML='<option value="">-- Pilih Provinsi --</option>',a.forEach(m=>{const d=document.createElement("option");d.value=m.id,d.textContent=m.name,e.provinceSelect.appendChild(d)})}catch(a){SaturaConfig.error("Failed to load provinces:",a)}}async function J(a){const m=a.target.value;if(!(!m||!e.regencyList))try{w(e.regencyList);const d=await SaturaApp.getRegenciesByProvince(m);e.regencyList.innerHTML="",d.forEach(b=>{const A=z(b);e.regencyList.appendChild(A)})}catch(d){SaturaConfig.error("Failed to load regencies:",d),e.regencyList.innerHTML='<p class="text-muted text-center">Gagal memuat data</p>'}}async function R(a){const m=a.target.value.trim();if(!(!m||m.length<2||!e.regencyList))try{const d=await SaturaApp.searchLocations(m);e.regencyList.innerHTML="",d.regencies.forEach(b=>{const A=z(b,!0);e.regencyList.appendChild(A)}),d.regencies.length===0&&(e.regencyList.innerHTML='<p class="text-muted text-center p-md">Tidak ada hasil</p>')}catch(d){SaturaConfig.error("Search failed:",d)}}function z(a,m=!1){const d=document.createElement("div");d.className="location-selector__item",d.dataset.regencyId=a.id;const b=document.createElement("div");if(b.className="location-selector__item-name",b.textContent=a.name,d.appendChild(b),m){const A=document.createElement("div");A.className="location-selector__item-province",A.textContent=a.province_name||"",d.appendChild(A)}return d.addEventListener("click",()=>G(a.id)),d}async function G(a){try{w(),await SaturaApp.setLocation(a),f(),t()}catch(m){SaturaConfig.error("Failed to set location:",m),t(),h("Gagal mengatur lokasi","error")}}function w(a=null){if(a){a.textContent="";const m=document.createElement("div");m.className="flex justify-center items-center p-lg";const d=document.createElement("div");d.className="spinner",m.appendChild(d),a.appendChild(m);return}e.loadingOverlay&&e.loadingOverlay.classList.remove("hidden")}function t(){e.loadingOverlay&&e.loadingOverlay.classList.add("hidden")}function h(a,m="info"){const d=document.createElement("div");d.className=`notification notification--${m}`,d.textContent=a,document.body.appendChild(d),setTimeout(()=>d.classList.add("is-visible"),10),setTimeout(()=>{d.classList.remove("is-visible"),setTimeout(()=>d.remove(),300)},3e3)}function u(a){e.statusIndicator&&(e.statusIndicator.classList.toggle("is-online",a),e.statusIndicator.classList.toggle("is-offline",!a)),a||h("Anda sedang offline. Data yang ditampilkan mungkin tidak terkini.","warning")}function y(a){if(!a){const d=new Date;return`${d.getDate()} ${o(d.getMonth())}`}const m=a.split("-");if(m.length===3){const d=parseInt(m[0]),b=parseInt(m[1])-1;return`${d} ${o(b)}`}return a}function o(a){return["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][a]||""}function p(a){return["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"][a.getDay()]}function i(a,m){let d;return function(...A){const Y=()=>{clearTimeout(d),a(...A)};clearTimeout(d),d=setTimeout(Y,m)}}function s(){e.countdownSkeleton&&(e.countdownSkeleton.classList.remove("hidden"),e.countdownSkeleton.style.display=""),e.countdownCard&&(e.countdownCard.classList.add("hidden"),e.countdownCard.style.display="none"),e.prayerTimesSkeleton&&(e.prayerTimesSkeleton.classList.remove("hidden"),e.prayerTimesSkeleton.style.display=""),e.prayerTimesGrid&&(e.prayerTimesGrid.classList.add("hidden"),e.prayerTimesGrid.style.display="none")}function l(){e.countdownSkeleton&&(e.countdownSkeleton.classList.add("hidden"),e.countdownSkeleton.style.display="none"),e.countdownCard&&(e.countdownCard.classList.remove("hidden"),e.countdownCard.style.display=""),e.prayerTimesSkeleton&&(e.prayerTimesSkeleton.classList.add("hidden"),e.prayerTimesSkeleton.style.display="none"),e.prayerTimesGrid&&(e.prayerTimesGrid.classList.remove("hidden"),e.prayerTimesGrid.style.display="")}return{init:B,updateLocation:$,updateScheduleTable:U,updatePrayerTimes:j,updateCountdown:q,updateHeroDate:P,setupFooter:H,showSkeletons:s,hideSkeletons:l,openLocationModal:k,closeModal:f,showLoading:w,hideLoading:t,showNotification:h,updateOnlineStatus:u,formatGregorianDate:y,getDayName:p,getMonthName:o}})();typeof module<"u"&&module.exports&&(module.exports=SaturaUI);const SaturaApp=(function(){"use strict";let e=!1,S=navigator.onLine,T=null;const I={onReady:[],onLocationChange:[],onPrayerTimesFetched:[],onNextPrayerUpdate:[],onOnlineStatusChange:[],onError:[]};async function B(){if(e)return SaturaConfig.log("App already initialized"),b();SaturaConfig.log("Initializing Satu Ramadhan...");try{const[g]=await Promise.all([H(),SaturaDatabase.preload()]);q();const C=SaturaPrayer.initFromCache();C&&(SaturaConfig.log("Showing cached schedule while fetching fresh data"),d("onPrayerTimesFetched",C));const D=await N();$().then(V=>{V&&d("onPrayerTimesFetched",V)}).catch(V=>{SaturaConfig.log("Background fetch failed, using cached data:",V.message)}),U(),e=!0;const X=b();return d("onReady",X),setTimeout(()=>{x()},1500),SaturaConfig.log("Initialization complete",X),X}catch(g){throw SaturaConfig.error("Initialization failed:",g),d("onError",g),g}}async function H(){if(!("serviceWorker"in navigator)){SaturaConfig.log("Service Worker not supported");return}try{const g=await navigator.serviceWorker.register("./sw.js",{scope:"./"});return SaturaConfig.log("Service Worker registered:",g.scope),g.addEventListener("updatefound",()=>{const C=g.installing;C.addEventListener("statechange",()=>{C.state==="installed"&&navigator.serviceWorker.controller&&(SaturaConfig.log("New version available"),d("onUpdateAvailable",g))})}),g}catch(g){SaturaConfig.error("Service Worker registration failed:",g)}}async function O(){try{const g=await SaturaLocation.getLocation();return SaturaConfig.log("Location initialized:",SaturaLocation.getDisplayName()),d("onLocationChange",g),g}catch(g){SaturaConfig.error("Location initialization failed:",g);const C=await SaturaLocation.setDefaultLocation();return d("onLocationChange",C),C}}async function N(){try{const g=await SaturaLocation.getSavedLocation();if(g)return SaturaConfig.log("Using saved location (fast init):",g),d("onLocationChange",g),g;SaturaConfig.log("No saved location, using default (fast init)");const C=await SaturaLocation.setDefaultLocation();return d("onLocationChange",C),C}catch(g){SaturaConfig.error("Fast location initialization failed:",g);const C=await SaturaLocation.setDefaultLocation();return d("onLocationChange",C),C}}async function x(){try{const g=SaturaLocation.getCurrentLocation();if(g&&g.source==="gps"){SaturaConfig.log("Already have GPS location, skipping retry");return}if(g&&g.source==="manual"){SaturaConfig.log("User has manual location, skipping GPS retry");return}SaturaConfig.log("Attempting GPS detection after splash...");const C=await SaturaLocation.detectLocation();C&&(SaturaConfig.log("GPS location obtained:",SaturaLocation.getDisplayName()),d("onLocationChange",C),$().catch(D=>{SaturaConfig.log("Failed to refresh prayer times with GPS location:",D.message)}))}catch(g){SaturaConfig.log("GPS retry failed (this is normal if user denied):",g.message)}}async function $(){try{const g=await SaturaPrayer.fetchTodaySchedule();return SaturaConfig.log("Prayer times fetched"),d("onPrayerTimesFetched",g),g}catch(g){throw SaturaConfig.error("Failed to fetch prayer times:",g),g}}function U(){T&&clearInterval(T),T=setInterval(()=>{const g=SaturaPrayer.getNextPrayer();g&&d("onNextPrayerUpdate",g)},SaturaConfig.APP.countdownInterval),SaturaConfig.log("Countdown timer started")}function j(){T&&(clearInterval(T),T=null)}function q(){window.addEventListener("online",P),window.addEventListener("offline",k)}async function P(){S=!0,SaturaConfig.log("App is online"),d("onOnlineStatusChange",!0);try{await SaturaPrayer.fetchTodaySchedule(!0)}catch(g){SaturaConfig.error("Failed to refresh after coming online:",g)}}function k(){S=!1,SaturaConfig.log("App is offline"),d("onOnlineStatusChange",!1)}async function f(){try{const g=await SaturaLocation.detectLocation();return await R(),d("onLocationChange",g),g}catch(g){throw SaturaConfig.error("Failed to detect location:",g),g}}async function F(g){try{const C=await SaturaLocation.setLocationByRegencyId(g);return await R(),d("onLocationChange",C),C}catch(C){throw SaturaConfig.error("Failed to set location:",C),C}}async function J(g){try{const C=await SaturaLocation.setLocationByProvinceId(g);return await R(),d("onLocationChange",C),C}catch(C){throw SaturaConfig.error("Failed to set location by province:",C),C}}async function R(){try{const g=await SaturaPrayer.fetchTodaySchedule(!0);return d("onPrayerTimesFetched",g),g}catch(g){throw SaturaConfig.error("Failed to refresh prayer times:",g),g}}async function z(){return await SaturaPrayer.fetchTodaySchedule()}async function G(g){return await SaturaPrayer.fetchScheduleForDate(g)}async function w(g,C){return await SaturaPrayer.fetchMonthlySchedule(g,C)}function t(){return SaturaPrayer.getNextPrayer()}function h(){return SaturaPrayer.getCurrentPrayer()}function u(){return SaturaPrayer.getOrderedTimes()}function y(){return SaturaPrayer.getRamadhanTimes()}function o(){return SaturaPrayer.isRamadhan()}function p(){return SaturaLocation.getDisplayName()}async function i(g){return await SaturaDatabase.searchAll(g)}async function s(){return await SaturaDatabase.getProvinces()}async function l(g){return await SaturaDatabase.getRegenciesByProvince(g)}function a(g,C){I[g]&&I[g].push(C)}function m(g,C){if(I[g]){const D=I[g].indexOf(C);D>-1&&I[g].splice(D,1)}}function d(g,C){I[g]&&I[g].forEach(D=>{try{D(C)}catch(X){SaturaConfig.error(`Callback error for ${g}:`,X)}})}function b(){return{app:{name:SaturaConfig.APP.name,version:SaturaConfig.APP.version,initialized:e,online:S},location:SaturaLocation.getStatus(),prayer:SaturaPrayer.getStatus(),api:SaturaAPI.getEndpointStatus(),database:SaturaDatabase.getStatus(),storage:SaturaStorage.getStorageInfo()}}function A(){SaturaPrayer.clearCache(),SaturaStorage.clearPrayerCache(),SaturaConfig.log("All cache cleared")}function Y(){j(),SaturaStorage.clearAll(),SaturaLocation.clearSavedLocation(),e=!1,SaturaConfig.log("App reset to initial state")}function W(){return SaturaStorage.exportData()}function Z(g){SaturaStorage.importData(g)}async function ee(){const g={endpoints:[],success:!1},C=SaturaLocation.getCoordinates()||SaturaConfig.LOCATION.default;for(let D=0;D<SaturaConfig.API.endpoints.length;D++){const X=SaturaConfig.API.endpoints[D],V=Date.now();try{const ne=await fetch(`${X}/timings?latitude=${C.latitude}&longitude=${C.longitude}&method=${SaturaConfig.API.method}`),re=await ne.json(),n=Date.now()-V;g.endpoints.push({url:X,success:re.code===200,duration:n,status:ne.status}),re.code===200&&(g.success=!0)}catch(ne){g.endpoints.push({url:X,success:!1,error:ne.message,duration:Date.now()-V})}}return g}function ie(){return{status:b(),config:{api:SaturaConfig.API,prayer:SaturaConfig.PRAYER,cache:SaturaConfig.CACHE,location:SaturaConfig.LOCATION},environment:{userAgent:navigator.userAgent,online:navigator.onLine,language:navigator.language,cookiesEnabled:navigator.cookieEnabled,serviceWorker:"serviceWorker"in navigator,geolocation:"geolocation"in navigator}}}return{init:B,detectAndSetLocation:f,setLocation:F,setLocationByProvince:J,getLocationName:p,searchLocations:i,getProvinces:s,getRegenciesByProvince:l,refreshPrayerTimes:R,getPrayerSchedule:z,getPrayerScheduleForDate:G,getMonthlySchedule:w,getNextPrayer:t,getCurrentPrayer:h,getOrderedTimes:u,getRamadhanTimes:y,isRamadhan:o,startCountdown:U,stopCountdown:j,on:a,off:m,getStatus:b,clearCache:A,reset:Y,exportData:W,importData:Z,testAPI:ee,getDebugInfo:ie,modules:{Config:SaturaConfig,API:SaturaAPI,Database:SaturaDatabase,Location:SaturaLocation,Prayer:SaturaPrayer,Storage:SaturaStorage}}})();typeof module<"u"&&module.exports&&(module.exports=SaturaApp),window.SaturaApp=SaturaApp,(function(){"use strict";let e=null;async function S(){if(e)return e;try{const n=await fetch("./database/ramadhan.json");if(!n.ok)throw new Error("Failed to load ramadhan.json");const r=await n.json();e=r;const c=new Date().getFullYear();return r.tahunMasehi&&r.tahunMasehi!==c&&(console.warn(`[Main] ramadhan.json is for ${r.tahunMasehi}, but current year is ${c}`),setTimeout(()=>{D(`Data Ramadhan masih untuk tahun ${r.tahunMasehi}. Jadwal mungkin tidak akurat untuk tahun ${c}.`,"warning")},3e3)),r}catch(n){console.error("[Main] Failed to load Ramadhan config:",n);let r=new Date().getFullYear()+579;try{const c=await SaturaAPI.gregorianToHijri(new Date);c&&c.hijri&&c.hijri.year&&(r=parseInt(c.hijri.year))}catch(c){console.error("[Main] Failed to get Hijri year from API:",c)}return e={tahunHijriah:r,tahunMasehi:new Date().getFullYear(),tanggalSatuRamadhan:{muhammadiyah:null,nu:null}},e}}function T(n){if(!e||!e.tanggalSatuRamadhan)return null;const r=e.tanggalSatuRamadhan[n];if(!r)return null;const[c,v,L]=r.split("-").map(Number);return new Date(c,v-1,L)}let I=[],B=[],H=null,O=[],N=!1,x=null,$=[];const U=10,j=60,q=90;function P(n){return n?n.split(" ")[0]:"-"}function k(n){if(n==null)return"";const r=String(n),c=document.createElement("div");return c.textContent=r,c.innerHTML}const f={};function F(){["locationName","currentLocationText","countdownPrayerName","countdownHours","countdownMinutes","countdownSeconds","prayerTimesGrid","scheduleTableBody","hijriMonth","hijriYear","loadingOverlay","headerTime","headerDate","provinceDropdown","provinceTrigger","provinceOptions","regencyDropdown","regencyTrigger","regencyOptions","toggleSchedule","scheduleWrapper","countdownSkeleton","countdownCard","prayerTimesSkeleton"].forEach(r=>f[r]=document.getElementById(r))}function J(){const n=new Date,r=n.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),c=n.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"short",year:"numeric"});f.headerTime&&(f.headerTime.textContent=r),f.headerDate&&(f.headerDate.textContent=c)}function R(){const n=document.querySelectorAll(".page"),r=document.querySelectorAll("[data-page], [data-goto]");function c(v){n.forEach(E=>E.classList.remove("page--active"));const L=document.getElementById(`page-${v}`);L&&L.classList.add("page--active"),document.querySelectorAll(".nav__link").forEach(E=>{E.classList.toggle("nav__link--active",E.dataset.page===v)}),v==="pengaturan"&&w()}r.forEach(v=>{v.addEventListener("click",L=>{L.preventDefault(),c(v.dataset.page||v.dataset.goto)})})}function z(){const n=document.getElementById("menuToggle"),r=document.getElementById("headerNav"),c=document.querySelector(".header");n&&r&&(n.addEventListener("click",v=>{v.stopPropagation(),r.classList.toggle("is-active");const L=n.querySelector("i");L.classList.toggle("bx-menu"),L.classList.toggle("bx-x")}),document.addEventListener("click",v=>{if(r.classList.contains("is-active")&&!r.contains(v.target)&&!n.contains(v.target)){r.classList.remove("is-active");const L=n.querySelector("i");L.classList.remove("bx-x"),L.classList.add("bx-menu")}}),r.querySelectorAll("a").forEach(v=>{v.addEventListener("click",()=>{r.classList.remove("is-active");const L=n.querySelector("i");L.classList.remove("bx-x"),L.classList.add("bx-menu")})}))}function G(n,r,c,v){!n||!r||!c||(r.addEventListener("click",()=>{n.classList.contains("custom-select--disabled")||n.classList.toggle("custom-select--open")}),document.addEventListener("click",L=>{n.contains(L.target)||n.classList.remove("custom-select--open")}))}async function w(){if(!(I.length>0))try{I=await SaturaDatabase.getProvinces(),t()}catch(n){console.error("Failed to load provinces:",n)}}function t(){f.provinceOptions&&(f.provinceOptions.innerHTML=I.map(n=>`
            <div class="custom-select__option" data-value="${k(n.id)}" data-name="${k(n.name)}">
                ${k(n.name)}
            </div>
        `).join(""),f.provinceOptions.querySelectorAll(".custom-select__option").forEach(n=>{n.addEventListener("click",()=>h(n.dataset.value,n.dataset.name))}))}async function h(n,r){H=n,f.provinceTrigger.querySelector("span").textContent=r,f.provinceDropdown.classList.remove("custom-select--open"),f.regencyDropdown.classList.remove("custom-select--disabled"),f.regencyTrigger.querySelector("span").textContent="-- Pilih Kabupaten/Kota --";try{B=await SaturaDatabase.getRegenciesByProvince(n),u()}catch(c){console.error("Failed to load regencies:",c)}}function u(){f.regencyOptions&&(f.regencyOptions.innerHTML=B.map(n=>`
            <div class="custom-select__option" data-value="${k(n.id)}" data-name="${k(n.name)}" data-lat="${k(n.latitude)}" data-lng="${k(n.longitude)}">
                ${k(n.name)}
            </div>
        `).join(""),f.regencyOptions.querySelectorAll(".custom-select__option").forEach(n=>{n.addEventListener("click",()=>{y(n.dataset.name,parseFloat(n.dataset.lat),parseFloat(n.dataset.lng))})}))}async function y(n,r,c){if(!navigator.onLine){D("Tidak dapat mengubah lokasi saat offline.","error"),f.regencyDropdown.classList.remove("custom-select--open");return}if(f.regencyTrigger.querySelector("span").textContent=n,f.regencyDropdown.classList.remove("custom-select--open"),r&&c){g();try{await p(r,c,n),D("Lokasi berhasil diatur: "+n,"success")}catch(v){console.error("Failed to set location:",v),D("Gagal mengubah lokasi. Silakan coba lagi.","error")}finally{C()}}}async function o(){if(!navigator.onLine){D("Tidak dapat menggunakan GPS saat offline.","error");return}const n=document.getElementById("useGpsBtn");if(!n||n.classList.contains("btn--loading"))return;const r=n.innerHTML;n.classList.add("btn--loading"),n.disabled=!0,n.innerHTML="";const c=document.createElement("span");c.className="btn__spinner",n.appendChild(c),n.appendChild(document.createTextNode(" Mendeteksi lokasi..."));try{const v=await new Promise((K,te)=>{navigator.geolocation.getCurrentPosition(K,te,{enableHighAccuracy:!0,timeout:1e4})}),L=v.coords.latitude,E=v.coords.longitude,M=await SaturaDatabase.findNearestRegency(L,E),_=M?M.name:"Lokasi GPS";await p(L,E,_),D("Lokasi GPS berhasil: "+_,"success")}catch(v){console.error("GPS error:",v),D("GPS gagal. Silakan pilih lokasi manual.","error")}finally{n.classList.remove("btn--loading"),n.disabled=!1,n.innerHTML=r}}async function p(n,r,c){await SaturaLocation.setLocationByCoordinates(n,r),SaturaStorage.set("user_location",{latitude:n,longitude:r,name:c}),i(c);try{await SaturaApp.refreshPrayerTimes(),await l(n,r),await s(n,r)}catch(v){throw console.error("Failed to refresh:",v),v}}function i(n){f.locationName&&(f.locationName.textContent=n),f.currentLocationText&&(f.currentLocationText.textContent=n)}async function s(n,r){try{const c=new Date;c.setDate(c.getDate()+1);const v=await SaturaAPI.getPrayerTimes(n,r,c);return x=v,v}catch(c){return console.error("Failed to fetch tomorrow schedule:",c),null}}async function l(n,r){const c=SaturaStorage.get("organization")||"nu",v=T(c);if(v)try{const L=v.getFullYear(),E=v.getMonth()+1,M=E===12?1:E+1,_=E===12?L+1:L,[K,te]=await Promise.all([SaturaAPI.getMonthlyCalendar(n,r,E,L),SaturaAPI.getMonthlyCalendar(n,r,M,_)]);O=[...K||[],...te||[]],a()}catch(L){console.error("Failed to load monthly schedule:",L)}}function a(){const n=f.scheduleTableBody;if(!n)return;const r=SaturaStorage.get("organization")||"nu",c=T(r);if(!c)return;const v=new Date,L=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];let E="";for(let M=0;M<30;M++){const _=new Date(c);_.setDate(c.getDate()+M);const K=_.toDateString()===v.toDateString(),te=L[_.getDay()],ae=_.toLocaleDateString("id-ID",{day:"numeric",month:"short"}),oe=M+1,Q=O.find(se=>{if(!se?.date?.gregorian?.date)return!1;const[ce,le,de]=se.date.gregorian.date.split("-");return new Date(de,le-1,ce).toDateString()===_.toDateString()})?.timings||{};E+=`
                <tr class="${K?"is-today":""}">
                    <td>${k(oe)}</td>
                    <td>${k(ae)}</td>
                    <td class="time-primary">${k(P(Q.Imsak))}</td>
                    <td>${k(P(Q.Fajr))}</td>
                    <td>${k(P(Q.Sunrise))}</td>
                    <td>${k(P(Q.Dhuhr))}</td>
                    <td>${k(P(Q.Asr))}</td>
                    <td class="time-accent">${k(P(Q.Maghrib))}</td>
                    <td>${k(P(Q.Isha))}</td>
                </tr>
            `}n.innerHTML=E,m()}function m(){const n=document.getElementById("mobileScheduleCards");if(!n)return;const r=SaturaStorage.get("organization")||"nu",c=T(r);if(!c)return;const v=new Date,L=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];let E="";for(let M=0;M<30;M++){const _=new Date(c);_.setDate(c.getDate()+M);const K=_.toDateString()===v.toDateString(),te=L[_.getDay()],ae=_.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"short",year:"numeric"}),oe=M+1,Q=O.find(se=>{if(!se?.date?.gregorian?.date)return!1;const[ce,le,de]=se.date.gregorian.date.split("-");return new Date(de,le-1,ce).toDateString()===_.toDateString()})?.timings||{};E+=`
                <div class="schedule-card ${K?"is-today":""}">
                    <div class="schedule-card__header">
                        <div class="schedule-card__header-content">
                            <span class="schedule-card__day">Hari ${k(oe)}</span>
                            <span class="schedule-card__date">${k(ae)}</span>
                        </div>
                        ${K?'<span class="schedule-card__badge">Hari Ini</span>':""}
                    </div>
                    <div class="schedule-card__body">
                        <div class="schedule-card__grid">
                            <div class="schedule-time-box schedule-time-box--imsak">
                                <span class="schedule-time-box__label">Imsak</span>
                                <span class="schedule-time-box__value">${k(P(Q.Imsak))}</span>
                            </div>
                            <div class="schedule-time-box">
                                <span class="schedule-time-box__label">Subuh</span>
                                <span class="schedule-time-box__value">${k(P(Q.Fajr))}</span>
                            </div>
                            <div class="schedule-time-box">
                                <span class="schedule-time-box__label">Terbit</span>
                                <span class="schedule-time-box__value">${k(P(Q.Sunrise))}</span>
                            </div>
                            <div class="schedule-time-box">
                                <span class="schedule-time-box__label">Dzuhur</span>
                                <span class="schedule-time-box__value">${k(P(Q.Dhuhr))}</span>
                            </div>
                            <div class="schedule-time-box">
                                <span class="schedule-time-box__label">Ashar</span>
                                <span class="schedule-time-box__value">${k(P(Q.Asr))}</span>
                            </div>
                            <div class="schedule-time-box schedule-time-box--maghrib">
                                <span class="schedule-time-box__label">Maghrib</span>
                                <span class="schedule-time-box__value">${k(P(Q.Maghrib))}</span>
                            </div>
                            <div class="schedule-time-box">
                                <span class="schedule-time-box__label">Isya</span>
                                <span class="schedule-time-box__value">${k(P(Q.Isha))}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `}n.innerHTML=E}function d(){const n=f.toggleSchedule,r=f.scheduleWrapper;!n||!r||n.addEventListener("click",()=>{N=!N,r.classList.toggle("schedule__wrapper--collapsed",!N);const c=n.querySelector("i");c.classList.toggle("bx-chevron-down",!N),c.classList.toggle("bx-chevron-up",N),n.querySelector("span").textContent=N?"Sembunyikan Jadwal":"Lihat Jadwal Lengkap"})}function b(n){const r=f.prayerTimesGrid;if(!r||!n||!n.length)return;f.prayerTimesSkeleton&&(f.prayerTimesSkeleton.classList.add("hidden"),f.prayerTimesSkeleton.style.display="none"),r.classList.remove("hidden"),r.style.display="";const c=SaturaApp.getNextPrayer(),v={imsak:"moon-stars.svg",fajr:"sun-fog.svg",sunrise:"sun-rise.svg",dhuhr:"sun.svg",asr:"cloud-sun.svg",maghrib:"sun-set.svg",isha:"moon.svg"};r.innerHTML=n.map(L=>{const E=v[L.key]||"sun.svg";return`
            <div class="prayer-time-item ${c?.key===L.key?"is-next":""}">
                <div class="prayer-time-item__icon">
                    <img src="assets/icon/${k(E)}" alt="${k(L.name)}" loading="lazy">
                </div>
                <div class="prayer-time-item__content">
                    <div class="prayer-time-item__name">${k(L.name)}</div>
                    <div class="prayer-time-item__time">${k(L.time||"--:--")}</div>
                </div>
            </div>
        `}).join("")}function A(n){if(!n?.hijri)return;const r=n.hijri;f.hijriMonth&&(f.hijriMonth.textContent=r.month?.en||"Ramadhan"),f.hijriYear&&(f.hijriYear.textContent=r.year+" H")}function Y(){const n=new Date,r=n.getHours()*60+n.getMinutes();if(!SaturaPrayer.getStatus()?.hasSchedule)return!1;const L=SaturaApp.getOrderedTimes().find(K=>K.key==="isha");if(!L?.time)return!1;const[E,M]=L.time.split(":").map(Number),_=E*60+M;return r>_}function W(){const n=document.querySelector(".prayer-times-title");if(!n)return;const r=new Date,c=r.getHours();if(Y()&&c<24){const v=new Date(r);v.setDate(r.getDate()+1);const L=v.toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"});n.innerHTML=`Jadwal untuk Besok <span class="tomorrow-date">${k(L)}</span>`}else n.textContent="Jadwal Hari Ini"}function Z(n){if(n){if(W(),f.countdownSkeleton&&(f.countdownSkeleton.classList.add("hidden"),f.countdownSkeleton.style.display="none"),f.countdownCard&&(f.countdownCard.classList.remove("hidden"),f.countdownCard.style.display=""),f.countdownPrayerName&&(f.countdownPrayerName.textContent=n.name||"-"),!n.isToday&&n.key==="imsak"&&x){const r=x.timings?.Imsak;if(r){const c=ee(r);if(c){f.countdownHours&&(f.countdownHours.textContent=String(c.hours).padStart(2,"0")),f.countdownMinutes&&(f.countdownMinutes.textContent=String(c.minutes).padStart(2,"0")),f.countdownSeconds&&(f.countdownSeconds.textContent=String(c.seconds).padStart(2,"0"));return}}}if(n.remaining){const{hours:r,minutes:c,seconds:v}=n.remaining;f.countdownHours&&(f.countdownHours.textContent=String(r).padStart(2,"0")),f.countdownMinutes&&(f.countdownMinutes.textContent=String(c).padStart(2,"0")),f.countdownSeconds&&(f.countdownSeconds.textContent=String(v).padStart(2,"0"))}}}function ee(n){if(!n)return null;const r=new Date,c=new Date(r);c.setDate(c.getDate()+1);const v=n.split(" ")[0],[L,E]=v.split(":").map(Number);c.setHours(L,E,0,0);const M=c-r;return M<=0?null:{total:M,hours:Math.floor(M/(1e3*60*60)),minutes:Math.floor(M%(1e3*60*60)/(1e3*60)),seconds:Math.floor(M%(1e3*60)/1e3)}}function ie(){document.querySelectorAll('input[name="organization"]').forEach(c=>{c.addEventListener("change",async v=>{SaturaStorage.set("organization",v.target.value);const L=v.target.parentElement.querySelector(".settings__option-title").textContent;D("Organisasi diubah: "+L,"success");const E=SaturaStorage.get("user_location");E?.latitude&&E?.longitude&&await l(E.latitude,E.longitude)})});const n=SaturaStorage.get("organization")||"nu",r=document.querySelector(`input[name="organization"][value="${n}"]`);r&&(r.checked=!0)}function g(){f.loadingOverlay?.classList.remove("hidden")}function C(){f.loadingOverlay?.classList.add("hidden")}function D(n,r="info"){const c=document.createElement("div");c.className=`notification notification--${r}`,c.textContent=n;const v=q+$.length*(j+U);c.style.top=v+"px",document.body.appendChild(c),$.push(c),setTimeout(()=>c.classList.add("is-visible"),10),setTimeout(()=>{c.classList.remove("is-visible"),setTimeout(()=>{const L=$.indexOf(c);L>-1&&$.splice(L,1),c.remove(),X()},300)},3e3)}function X(){$.forEach((n,r)=>{const c=q+r*(j+U);n.style.top=c+"px"})}function V(){document.getElementById("backToTop")?.addEventListener("click",n=>{n.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})}function ne(){let n;const r=document.getElementById("footerInstallBtn"),c=r?r.closest(".footer__install"):null;c&&(c.classList.add("hidden"),c.style.display="none",c.parentElement&&c.parentElement.classList.add("footer__content--no-install")),window.addEventListener("beforeinstallprompt",v=>{v.preventDefault(),n=v,c&&(c.classList.remove("hidden"),c.style.display="",c.parentElement&&c.parentElement.classList.remove("footer__content--no-install"))}),r&&r.addEventListener("click",async()=>{if(n){n.prompt();const{outcome:v}=await n.userChoice;SaturaConfig.log(`Install prompt response: ${v}`),n=null,v==="accepted"&&c&&(c.classList.add("hidden"),c.style.display="none",c.parentElement&&c.parentElement.classList.add("footer__content--no-install"))}}),window.addEventListener("appinstalled",()=>{n=null,c&&(c.classList.add("hidden"),c.style.display="none",c.parentElement&&c.parentElement.classList.add("footer__content--no-install")),D("Aplikasi berhasil dipasang!","success")})}async function re(){if(await S(),F(),R(),z(),ie(),d(),V(),ne(),e){const r=e.tahunHijriah,c=document.getElementById("hijriYear");c&&(c.textContent=`${r} H`);const v=document.getElementById("scheduleTitle");v&&(v.textContent=`Jadwal Ramadhan ${r} H`);const L=document.getElementById("orgDescription");L&&(L.textContent=`Pilih organisasi untuk menentukan awal Ramadhan ${r} H`);const E=K=>{if(!K)return"";const[te,ae,oe]=K.split("-").map(Number),ue=new Date(te,ae-1,oe);return`${oe} ${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][ae-1]} ${te}`},M=document.getElementById("muhammadiyahDate");M&&e.tanggalSatuRamadhan?.muhammadiyah&&(M.textContent=`1 Ramadhan = ${E(e.tanggalSatuRamadhan.muhammadiyah)}`);const _=document.getElementById("nuDate");_&&e.tanggalSatuRamadhan?.nu&&(_.textContent=`1 Ramadhan = ${E(e.tanggalSatuRamadhan.nu)}`)}try{const r=SaturaConfig.AUTHOR,c=new Date().getFullYear(),v=document.getElementById("footerCopyright");if(v){v.textContent="",v.appendChild(document.createTextNode(`\xA9 ${c} `));const E=document.createElement("span");E.className="footer__highlight",E.textContent=r.copyright,E.style.cssText="cursor: pointer; color: var(--clr-accent-500); font-weight: bold;",E.addEventListener("click",()=>window.open(r.website,"_blank","noopener,noreferrer")),v.appendChild(E),v.appendChild(document.createTextNode(". All rights reserved."))}const L=document.querySelector(".footer__social");L&&r.social&&(L.innerHTML="",Object.keys(r.social).forEach(E=>{const M=r.social[E];if(M&&M.url){const _=document.createElement("a");_.href=M.url,_.target="_blank",_.rel="noopener noreferrer",_.className="footer__social-link";const K=document.createElement("i");K.className=`bx bxl-${k(E)}`,_.appendChild(K),L.appendChild(_)}}))}catch(r){console.error("Footer init failed:",r)}G(f.provinceDropdown,f.provinceTrigger,f.provinceOptions),G(f.regencyDropdown,f.regencyTrigger,f.regencyOptions),document.getElementById("useGpsBtn")?.addEventListener("click",o),J(),setInterval(J,1e3);const n=SaturaStorage.get("user_location");n?.name&&i(n.name),SaturaApp.on("onPrayerTimesFetched",r=>{const c=SaturaApp.getOrderedTimes();b(c),A(r?.date)}),SaturaApp.on("onNextPrayerUpdate",Z),SaturaApp.on("onLocationChange",()=>{const r=SaturaStorage.get("user_location");r?.name&&i(r.name)});try{await SaturaApp.init();const r=SaturaStorage.get("user_location");r?r.latitude&&r.longitude&&(await l(r.latitude,r.longitude),await s(r.latitude,r.longitude)):o()}catch(r){console.error("Init failed:",r)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",re):re()})();
